# GASP ALS Tutorial - How To Add Overlay States - Free Unreal Project on GitHub (20241204)

hello everyone welcome to a tutorial this time as you guys have been requesting for quite some time we'll do a quick tutorial and show you guys how to add a new overlay to the game I'm going to show you guys how easy it is to add an overlay state to the uh to the project um so let's start um the first thing is I have here in overlay system overlays I added a melee folder and I I put some poses here so these poses are coming from Franklin Max animation so I'm not going to push

them to the GitHub project because they do not belong to me uh but basically you can you can use whatever poses you want the the same tutorial is going to function so here you can see that I have the poses and basically uh what we are relying on is the curves here to understand how much we blend each part of the body so um like the left hand the right hand uh Etc so the way to create curves is um I put put a anim modifier in the project which is create layering

curve curves here when you click on this one you will see that it creates a bunch of Curves we don't need all of these for all the poses but they are here when you start and then you can remove the ones that you don't need and default value I'm going to set it to one and key each frame I'm going to remove it because if this is a onef frame animation and you have this thing selected it's not going to set the value to one it's just going to leave it zero and it's not going to create a key so if

you have if you have an animation that that has multiple frames you can do this to spawn multiple keys in your animation but if your animation is just a Bose like one frame then uh untick this so once this is added here I'm going to apply the modifier and you see like it created all these curves so the way these curves work is basically it's going to check each and every one of them to understand if it should layer this on top of the normal pose or not so layering arm L at one means that it is

going to take this left arm pose that we have here and it's going to put it on top of uh the other the normal Locomotion pose and one means it's going to take this one if it's 0.5 it means it's going to blend this one uh 0.5 and the normal Poe 0.5 and then you have also the additives like you have additive and local space so additive is mesh space and then LS is additive local space so these ones basically mean uh tell the system to play the base

Locomotion animation on top of this layered animation so uh basically uh here if we have layering all left at one it means that it's going to take exactly this pose but if we have addative at one and local space at one it means it's going to take this pose and then it's going to take the kind of movement and momentum from uh the base Locomotion and it's going to add it on top of this pose again so uh you can play with these values and you will see how it it behaves um sometimes you don't need the

legs so you can remove the legs uh if you don't need to uh the additive space we can remove it all of these we can play with and spine rotation is what's used for the aim offset so if you're if you have a weapon and uh you don't need to aim offset for example in your idle state in your relaxed state or your ready state but if you are in your aiming State then you want to rotate the character towards where the camera is looking and this enable spine rotation allows the upper body to rotate when we

are looking around with the camera so basically this uh we have different poses I already did the layering curves for the other poses but each pose that you have needs to have the layering curves depending on what you want and then you can delete and add the ones that you don't want so for example in the idle um I don't want the hand I right because the right hand is going to be holding the weapon so I'm going to remove this curve and this is Idle I don't need spinal rotation so I'm going

to remove it the ik hand left I'm going to keep it because I want the left hand to always be where it is and basically the rest is kind of okay we're going to see if the legs behave correctly and stuff so that's it for the poses now if we come here to overlays like I explained before we have two uh base overlays we have the simple one and the base one the difference between them is the simple one only has H like a relaxed um it has an idle a move uh animation so

this is basically used for simple things like the the not even the torch but like the box so there's no aiming with the Box uh it just has like when I'm idle I am blending the pose with a certain parameters and then when I'm moving moving I'm I'm blending it with different parameters so if you have a simple system I don't know like holding something that doesn't require aiming or anything just you can use the simple and if you have something that has aiming or like a bit more complex you can use the

the the complex base so we're going to use this one for for the katana and we're going to just create a child blueprint of this we're going to select our um skeleton and here I'm going to call this Katana so I'm going to move it into the melee overlays here and then we're going to open it and we're going to start setting our animation we don't need to touch the um uh the graph there so here

we're going to search for Katana and we're going to take the ready idle and the ready walk and the ready run and the ready uh Katana Sprint and I'm going to use basically the same ones for the ready State and for the aim state I'm going to use I have a guard animation so I'm going to use that one one okay so and I'm going to use it in

all of them uh all these are just poses by the way so this is the one we're using for idle this is the same one used for run but it just has like different values somewhere and this is the same one we're using for the walk run is a different one and Sprint is the same as run but again with different values in the layering and the guard is a different pose where he's guarding and the same thing like it has um it its layering values so once these are done B basically our overlay state is ready now

all we need to do is we need to play it so in order to play it like we're going to go to the overlay system here and in the blueprints I'm going to add the overlay state so here I'm going to add an enumerator and call this Katana we're good and then I'm am going to go into my character here and in the update overlay State I will see that Katana has appeared in here so I'm just going to copy

base the one that is just here and I'm going to set it for the katana so this is not a barrel I'm going to remove this and it's not left hand it's right hand and I'm going to remove the socket because we didn't create it yet and here we're going to use the katana overlay we just created and I'm going to attach this to the katana and basically we're already done so let's test and then we're going to put some adjustments after

that so here we can see that the katana overlay is here and if we open it we can see that the overlay is already plain and if I hit okay something went terribly wrong here let me check what's going on this is the guard animation and why is it behaving like this h this is weird shouldn't be

happening it's a feature guys it's a feature I mean come on like you just scale your character yeah we're going to we're going to see where this is coming from and we'll fix it in a few so let's just continue so the the overlay is plain here so now what we'll do is uh we'll add a socket and we'll spawn the item so we'll add a socket for uh for our character so let's just open our mesh here and open skeleton and it's on the right hand so

let's go to the right hand and let's add a socket and we'll call this overlay Katana and what we can do is we can add a preview asset and I have a mesh for the katana which is a cinti mesh I'll put it in here we can do a preview animation and we can open for example our idle animation to to like position the mesh correctly so what I will do is I already have uh the values here so I'm just

going to copy them so that we don't waste time so this is the position location and this is the rotation so Katana is a bit big for the character but we're not going to get into scaling or anything this is for demonstration purposes so the overlay is set we can save this I'm going to remove all attached assets and now we're going to come here and we're going to say that we want to spawn to attach in the overlay Katana

socket and the mesh that I want to spawn is this one okay so now if we play the game again and we go to the katana it's not sping it I probably made a mistake overlay yes so now if we open this one we can see that it's working kind of fine so as you

can see the uh the left hand is acting a bit finicky because of ik and I think that the the the problem is coming from the fact that it's actually playing the idle animation on top of the overlay so let's try to fix that quickly so we're going to go into this and I'm going to open the idle animation here and for the left arm additive and actually even the right arm additives I'm going to set these to

zero I don't want additives to play on top and now let's check so yeah it's it's a bit better and we can see that it's not playing the base animation on top of that so ik is still uh I still not done properly because what we need to do is basically we need to have a socket in the weapon that has where the second hand is supposed to be attached and then we can get that socket in the animation blueprint and attached to it uh I didn't do that yet and we can see that uh here

the left hand basically uh goes away when he's playing the idle break animation so the character every X seconds play an idle break and then it it messes up the overlay that's what what's happening here but if we do proper proper ik or if we don't play this idle break when we're using a katana but we play an idle break that comes from uh Katana animation then that's going to be fine so now as we can see like everything is working do we still have this issue yeah I'm still

have this issue and uh like we can see that when we're running like the animation goes to this one uh I think that this one is not very good for actually running so let's let's change that to the Sprint animation so if we go into the uh our overlay Katana and we'll take this print animation and we'll use it for the run as well so now when we're here the moment we start running he's going to go into this pose and then if we start walking he's going

to go into this pose running again sprinting so let's say that maybe when we Sprint I don't want the uh right hand to move that much okay so I'm going to go into the Sprint pose and I will say that I want the aditives again to be at zero so I want just to use the pose and I absolutely don't want that movement when I'm running so who okay

now when I'm running you can see that the hand is like literally static so this is not very good but what we should be doing is uh something like I don't know 0.3 or something and what I will do is I will like do duplicate this animation and I'll for now I'll just call it run two and for run two uh like we're going to use different values here

so for run two I'm going to use 0.6 and now in here instead of Sprint we'll use run two and then in Sprint we'll use that other one so what we'll see here is is basically when we start running his hand is moving quite a lot sorry for that his hand is moving quite a lot and then when we start sprinting it's going to move a bit less so this is how basically we play with these uh here we

can see that the legs are a bit too much so for example if we don't don't want to layer the legs on the idle so we can just go into the idle animation so here and we can say that we don't want the I'm just going to delete them okay so now the idle is not using that still going to use the the legs layering for when he's running for example but in idle he's not going to use the metal uh legs usually don't play very well with layering so I would I would avoid that

and of course these are not poses that are made for the layering these are just poses that I grabbed to uh to show you guys uh this so now let's try to understand what is happening with this um guard animation here okay guys I found out what was going on uh it's a bit stupid but it's you know the demo tutorial effect so now the guard is working so you can see here that basically at normal State this is my walk in now this is running sprinting is

going to have even less movement and now if I like go into guard like he just picks up the katana like this so so um the issue is just that uh in the overlay here I used the guard animation for actually for aim offset which is just not supposed to to work like that aim offet is the sweep it's going looking up and down so left and right in the aim offet is managed by spine rotation and up and down is managed by an animation you can take a look at other overlays you will see how

that works and basically as as you can see here if um we're using the default am of set here so even if I'm on the katana and I'm holding right you see that like he's uh he's looking to the left and to the right but he's actually not like turning his upper body so the way to do this is just if we go here into this and um we add a curve let's add metad data and um enable spine rotation so yeah we'll just

add this just turn it to a curve leave it at one and now if we hit right click and we start turning you'll see like his his body actually turns before he turns himself so this is what what we're using basically for this so so that the the weapons are always pointing there there is a little like click when it resets I'm going to find why that's happening actually it's not happening on on Crouch it's behaving much better but when

standing up it's it's behaving like that so that's how you do it guys that's how you add and over list it um to summarize first of all you get your poses and you add your uh layering curves to them then you create a child blueprint of either the complex or the base depending on on on your thing and you enter you select all your animations here then you add an enum to your uh to

the uh enumerator here for your overlay State and then in the character when you switch overlay it gets your enum gets added here you just link the layer which is your child ABP of the complex or the simple overlay um and in Blueprint and then here if you want to spawn an item you spawn an item and if you want to attach it to a specific socket then you create that socket and you uh you attach your weapon to it and of course this was a tutorial and this was done as fast as possible to

show you guys but basically if you like create the right poses tweak your curve values correctly and use really the values that you need and like with the 0.6 and 0.7 and to layer everything to keep the additives when it's needed you'll basically get the result that you want uh which is going to look like something uh like the overlays that we have here that were actually polished and were working so uh just a quick thing is the complex overlay is so you have this this is the

relax State and then when you're aiming this is the aimed State and then when you release aim and you have the ready State and then it goes back again into relax state so this is the complex stuff so for the katana this is the Rel relax State this is the aiming but the relax is the same as ready this is why you don't see that like additional movement it's because we didn't create poses and you can you can use the same pose for example for relax and ready and just adjust the values for the additives and

for the the layering to to have uh something that looks different um I just want to say something guys here like I get a lot of questions on on YouTube and sometimes by email where um people are asking me like very very basic questions as to how the system works I just want to tell you guys that this is not a simple project this is a complex project and if you have absolutely no experience with unreal you should probably not be using gasp let alone gasp Alis so if you're just

starting to make games although if you can if you take a look at this project and you feel like okay this this is this looks great and I really want to use this in my game if this is your first project and you're just learning this is going going to cause you more issues than than you uh you're ready for so I would really recommend that you guys uh start with something simple with simple Locomotion and then once you get used to the project once you get used to um to Unreal Engine once you get used to the

animation system understand how layering works and all of that stuff then you can like uh use something like this for a proper project but if you're just this starting in unreal this is really not recommended and I'm not speaking about gasp als I'm speaking about gasp gasp in in of itself is a pretty complex project uh it's a very Advanced Locomotion system and gasp alss is even more complex than that because it's basically using gasp and adding layering on top of

it so if you guys are just just starting to learn unreal I would not recommend uh using this as a as a stter project I would recommend that you use a simple Locomotion system uh ideally build your Locomotion system yourself and then once you're used to uh to the animation system and you understand how things work then you can attack something like this and that's it guys for this video I hope you understand how uh this system works if you have any questions don't hesitate to let me know um but you

should have pretty much all the information to to use the layering system so this was Anis I hope you guys enjoyed the video please drop like And subscribe if it's not yet the case and stay tuned for the next gasp ALS update
